generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
}

model activitylog {
  id         Int      @id @default(autoincrement())
  userId     Int?
  action     String
  entityType String?
  entityId   Int?
  metadata   String?  @db.LongText
  ipAddress  String?
  userAgent  String?
  createdAt  DateTime @default(now())

  @@index([action], map: "ActivityLog_action_idx")
  @@index([createdAt], map: "ActivityLog_createdAt_idx")
  @@index([userId], map: "ActivityLog_userId_idx")
}

model address {
  id           Int      @id @default(autoincrement())
  userId       Int
  type         String   @default("shipping")
  isDefault    Boolean  @default(false)
  businessName String?
  firstName    String
  lastName     String
  street       String
  street2      String?
  city         String
  state        String
  zip          String
  country      String   @default("USA")
  phone        String?
  createdAt    DateTime @default(now())
  updatedAt    DateTime
  user         user     @relation(fields: [userId], references: [id], onDelete: Cascade, map: "Address_userId_fkey")

  @@index([userId], map: "Address_userId_idx")
}

model banner {
  id          Int       @id @default(autoincrement())
  title       String
  subtitle    String?
  image       String
  mobileImage String?
  link        String?
  buttonText  String?
  position    String    @default("hero")
  sortOrder   Int       @default(0)
  isActive    Boolean   @default(true)
  startDate   DateTime?
  endDate     DateTime?
  createdAt   DateTime  @default(now())
  updatedAt   DateTime
}

model brand {
  id          Int        @id @default(autoincrement())
  name        String     @unique(map: "Brand_name_key")
  slug        String     @unique(map: "Brand_slug_key")
  logo        String?
  description String?    @db.Text
  isActive    Boolean    @default(true)
  sortOrder   Int        @default(0)
  createdAt   DateTime   @default(now())
  updatedAt   DateTime
  category    category[]
  product     product[]

  @@index([slug], map: "Brand_slug_idx")
}

model cartitem {
  id        Int      @id @default(autoincrement())
  userId    Int?
  sessionId String?
  productId Int
  quantity  Int      @default(1)
  createdAt DateTime @default(now())
  updatedAt DateTime
  product   product  @relation(fields: [productId], references: [id], onDelete: Cascade, map: "CartItem_productId_fkey")
  user      user?    @relation(fields: [userId], references: [id], onDelete: Cascade, map: "CartItem_userId_fkey")

  @@unique([sessionId, productId], map: "CartItem_sessionId_productId_key")
  @@unique([userId, productId], map: "CartItem_userId_productId_key")
  @@index([productId], map: "CartItem_productId_fkey")
  @@index([sessionId], map: "CartItem_sessionId_idx")
  @@index([userId], map: "CartItem_userId_idx")
}

model category {
  id             Int        @id @default(autoincrement())
  name           String
  slug           String     @unique(map: "Category_slug_key")
  description    String?    @db.Text
  image          String?
  icon           String?
  parentId       Int?
  brandId        Int?
  isActive       Boolean    @default(true)
  sortOrder      Int        @default(0)
  createdAt      DateTime   @default(now())
  updatedAt      DateTime
  brand          brand?     @relation(fields: [brandId], references: [id], map: "Category_brandId_fkey")
  category       category?  @relation("categoryTocategory", fields: [parentId], references: [id], map: "Category_parentId_fkey")
  other_category category[] @relation("categoryTocategory")
  product        product[]

  @@index([brandId], map: "Category_brandId_idx")
  @@index([parentId], map: "Category_parentId_idx")
  @@index([slug], map: "Category_slug_idx")
}

model contactsubmission {
  id        Int       @id @default(autoincrement())
  name      String
  email     String
  phone     String?
  subject   String
  message   String    @db.Text
  isRead    Boolean   @default(false)
  repliedAt DateTime?
  createdAt DateTime  @default(now())

  @@index([email], map: "ContactSubmission_email_idx")
  @@index([isRead], map: "ContactSubmission_isRead_idx")
}

model coupon {
  id             Int       @id @default(autoincrement())
  code           String    @unique(map: "Coupon_code_key")
  description    String?
  discountType   String
  discountValue  Decimal   @db.Decimal(10, 2)
  minOrderAmount Decimal?  @db.Decimal(10, 2)
  maxDiscount    Decimal?  @db.Decimal(10, 2)
  usageLimit     Int?
  usedCount      Int       @default(0)
  startDate      DateTime?
  endDate        DateTime?
  isActive       Boolean   @default(true)
  createdAt      DateTime  @default(now())
  updatedAt      DateTime

  @@index([code], map: "Coupon_code_idx")
}

model homepagesection {
  id         Int      @id @default(autoincrement())
  sectionKey String   @unique(map: "HomepageSection_sectionKey_key")
  title      String?
  subtitle   String?
  isVisible  Boolean  @default(true)
  sortOrder  Int      @default(0)
  settings   String?  @db.LongText
  updatedAt  DateTime
}

model mediafile {
  id        Int      @id @default(autoincrement())
  filename  String
  url       String
  mimeType  String
  size      Int
  width     Int?
  height    Int?
  alt       String?
  createdAt DateTime @default(now())
}

model menuitem {
  id             Int        @id @default(autoincrement())
  label          String
  link           String
  parentId       Int?
  position       String     @default("main")
  sortOrder      Int        @default(0)
  isActive       Boolean    @default(true)
  openNewTab     Boolean    @default(false)
  createdAt      DateTime   @default(now())
  updatedAt      DateTime
  menuitem       menuitem?  @relation("menuitemTomenuitem", fields: [parentId], references: [id], map: "MenuItem_parentId_fkey")
  other_menuitem menuitem[] @relation("menuitemTomenuitem")

  @@index([parentId], map: "MenuItem_parentId_fkey")
}

model model {
  id          Int       @id @default(autoincrement())
  name        String
  slug        String    @unique(map: "Model_slug_key")
  brandId     Int
  releaseYear Int?
  isActive    Boolean   @default(true)
  sortOrder   Int       @default(0)
  createdAt   DateTime  @default(now())
  updatedAt   DateTime
  product     product[]

  @@index([brandId], map: "Model_brandId_idx")
  @@index([slug], map: "Model_slug_idx")
}

model newslettersubscriber {
  id             Int       @id @default(autoincrement())
  email          String    @unique(map: "NewsletterSubscriber_email_key")
  isActive       Boolean   @default(true)
  source         String?
  createdAt      DateTime  @default(now())
  unsubscribedAt DateTime?

  @@index([email], map: "NewsletterSubscriber_email_idx")
}

model order {
  id                Int             @id @default(autoincrement())
  orderNumber       String          @unique(map: "Order_orderNumber_key")
  userId            Int
  status            String          @default("pending")
  paymentStatus     String          @default("pending")
  subtotal          Decimal         @db.Decimal(10, 2)
  discount          Decimal         @default(0.00) @db.Decimal(10, 2)
  discountCode      String?
  shipping          Decimal         @db.Decimal(10, 2)
  tax               Decimal         @db.Decimal(10, 2)
  total             Decimal         @db.Decimal(10, 2)
  shippingAddress   String          @db.LongText
  billingAddress    String?         @db.LongText
  shippingMethod    String
  shippingCarrier   String?
  trackingNumber    String?
  estimatedDelivery DateTime?
  shippedAt         DateTime?
  deliveredAt       DateTime?
  paymentMethod     String
  paymentIntentId   String?
  paidAt            DateTime?
  purchaseOrder     String?
  notes             String?         @db.Text
  internalNotes     String?         @db.Text
  createdAt         DateTime        @default(now())
  updatedAt         DateTime
  user              user            @relation(fields: [userId], references: [id], map: "Order_userId_fkey")
  orderitem         orderitem[]
  ordertimeline     ordertimeline[]

  @@index([orderNumber], map: "Order_orderNumber_idx")
  @@index([status], map: "Order_status_idx")
  @@index([userId], map: "Order_userId_idx")
}

model orderitem {
  id           Int     @id @default(autoincrement())
  orderId      Int
  productId    Int
  productName  String
  productSku   String
  productImage String?
  quantity     Int
  unitPrice    Decimal @db.Decimal(10, 2)
  discount     Decimal @default(0.00) @db.Decimal(10, 2)
  totalPrice   Decimal @db.Decimal(10, 2)
  order        order   @relation(fields: [orderId], references: [id], onDelete: Cascade, map: "OrderItem_orderId_fkey")
  product      product @relation(fields: [productId], references: [id], map: "OrderItem_productId_fkey")

  @@index([orderId], map: "OrderItem_orderId_idx")
  @@index([productId], map: "OrderItem_productId_idx")
}

model ordertimeline {
  id        Int      @id @default(autoincrement())
  orderId   Int
  status    String
  message   String
  createdBy String?
  createdAt DateTime @default(now())
  order     order    @relation(fields: [orderId], references: [id], onDelete: Cascade, map: "OrderTimeline_orderId_fkey")

  @@index([orderId], map: "OrderTimeline_orderId_idx")
}

model page {
  id              Int      @id @default(autoincrement())
  title           String
  slug            String   @unique(map: "Page_slug_key")
  content         String   @db.LongText
  metaTitle       String?
  metaDescription String?  @db.VarChar(500)
  isActive        Boolean  @default(true)
  createdAt       DateTime @default(now())
  updatedAt       DateTime

  @@index([slug], map: "Page_slug_idx")
}

model passwordreset {
  id        Int      @id @default(autoincrement())
  email     String
  token     String   @unique(map: "PasswordReset_token_key")
  expiresAt DateTime
  used      Boolean  @default(false)
  createdAt DateTime @default(now())

  @@index([email], map: "PasswordReset_email_idx")
  @@index([token], map: "PasswordReset_token_idx")
}

model product {
  id               Int         @id @default(autoincrement())
  name             String
  slug             String      @unique(map: "Product_slug_key")
  sku              String      @unique(map: "Product_sku_key")
  description      String?     @db.Text
  shortDescription String?     @db.VarChar(500)
  wholesalePrice   Decimal     @db.Decimal(10, 2)
  retailPrice      Decimal?    @db.Decimal(10, 2)
  costPrice        Decimal?    @db.Decimal(10, 2)
  stock            Int         @default(0)
  lowStockAlert    Int         @default(5)
  trackInventory   Boolean     @default(true)
  brandId          Int?
  categoryId       Int?
  modelId          Int?
  images           String      @db.LongText
  videos           String?     @db.LongText
  features         String?     @db.LongText
  specifications   String?     @db.LongText
  compatibility    String?     @db.Text
  qualityGrade     String?
  warranty         String?
  weight           Decimal?    @db.Decimal(8, 2)
  dimensions       String?
  isActive         Boolean     @default(true)
  isFeatured       Boolean     @default(false)
  isNew            Boolean     @default(false)
  isOnSale         Boolean     @default(false)
  metaTitle        String?
  metaDescription  String?     @db.VarChar(500)
  createdAt        DateTime    @default(now())
  updatedAt        DateTime
  cartitem         cartitem[]
  orderitem        orderitem[]
  brand            brand?      @relation(fields: [brandId], references: [id], map: "Product_brandId_fkey")
  category         category?   @relation(fields: [categoryId], references: [id], map: "Product_categoryId_fkey")
  model            model?      @relation(fields: [modelId], references: [id], map: "Product_modelId_fkey")
  review           review[]
  wishlist         wishlist[]

  @@index([brandId], map: "Product_brandId_idx")
  @@index([categoryId], map: "Product_categoryId_idx")
  @@index([isActive, isFeatured], map: "Product_isActive_isFeatured_idx")
  @@index([modelId], map: "Product_modelId_idx")
  @@index([sku], map: "Product_sku_idx")
  @@index([slug], map: "Product_slug_idx")
}

model review {
  id           Int      @id @default(autoincrement())
  productId    Int
  userId       Int
  rating       Int
  title        String?
  comment      String   @db.Text
  isVerified   Boolean  @default(false)
  isApproved   Boolean  @default(false)
  helpfulCount Int      @default(0)
  createdAt    DateTime @default(now())
  updatedAt    DateTime
  product      product  @relation(fields: [productId], references: [id], onDelete: Cascade, map: "Review_productId_fkey")
  user         user     @relation(fields: [userId], references: [id], onDelete: Cascade, map: "Review_userId_fkey")

  @@unique([productId, userId], map: "Review_productId_userId_key")
  @@index([productId], map: "Review_productId_idx")
  @@index([userId], map: "Review_userId_idx")
}

model session {
  id        Int      @id @default(autoincrement())
  userId    Int
  token     String   @unique(map: "Session_token_key")
  expiresAt DateTime
  createdAt DateTime @default(now())
  user      user     @relation(fields: [userId], references: [id], onDelete: Cascade, map: "Session_userId_fkey")

  @@index([token], map: "Session_token_idx")
  @@index([userId], map: "Session_userId_idx")
}

model sitesettings {
  id        Int      @id @default(autoincrement())
  key       String   @unique(map: "SiteSettings_key_key")
  value     String   @db.LongText
  updatedAt DateTime
}

model user {
  id                 Int        @id @default(autoincrement())
  email              String     @unique(map: "User_email_key")
  password           String
  name               String?
  businessName       String?
  phone              String?
  role               String     @default("customer")
  status             String     @default("active")
  taxId              String?
  taxCertificate     String?
  isApprovedReseller Boolean    @default(false)
  creditLimit        Decimal?   @db.Decimal(10, 2)
  createdAt          DateTime   @default(now())
  updatedAt          DateTime
  lastLoginAt        DateTime?
  address            address[]
  cartitem           cartitem[]
  order              order[]
  review             review[]
  session            session[]
  wishlist           wishlist[]
}

model wishlist {
  id        Int      @id @default(autoincrement())
  userId    Int
  productId Int
  createdAt DateTime @default(now())
  product   product  @relation(fields: [productId], references: [id], onDelete: Cascade, map: "Wishlist_productId_fkey")
  user      user     @relation(fields: [userId], references: [id], onDelete: Cascade, map: "Wishlist_userId_fkey")

  @@unique([userId, productId], map: "Wishlist_userId_productId_key")
  @@index([productId], map: "Wishlist_productId_fkey")
  @@index([userId], map: "Wishlist_userId_idx")
}
